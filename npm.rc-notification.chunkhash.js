(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{291:function(e,t,n){"use strict";n.r(t);var o=n(257),a=n.n(o),r=n(256),i=n.n(r),s=n(64),c=n.n(s),l=n(252),u=n.n(l),p=n(255),m=n.n(p),f=n(253),d=n.n(f),y=n(254),C=n.n(y),h=n(0),v=n.n(h),k=n(6),T=n.n(k),N=n(12),b=n.n(N),g=n(259),x=n(355),E=n(1),_=n.n(E),w=function(e){function t(){var e,n,o,a;u()(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=o=d()(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.close=function(e){e&&e.stopPropagation(),o.clearCloseTimer(),o.props.onClose()},o.startCloseTimer=function(){o.props.duration&&(o.closeTimer=setTimeout(function(){o.close()},1e3*o.props.duration))},o.clearCloseTimer=function(){o.closeTimer&&(clearTimeout(o.closeTimer),o.closeTimer=null)},a=n,d()(o,a)}return C()(t,e),m()(t,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentDidUpdate",value:function(e){(this.props.duration!==e.duration||this.props.update)&&this.restartCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"restartCloseTimer",value:function(){this.clearCloseTimer(),this.startCloseTimer()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls+"-notice",o=(e={},i()(e,""+n,1),i()(e,n+"-closable",t.closable),i()(e,t.className,!!t.className),e);return v.a.createElement("div",{className:_()(o),style:t.style,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:t.onClick},v.a.createElement("div",{className:n+"-content"},t.children),t.closable?v.a.createElement("a",{tabIndex:"0",onClick:this.close,className:n+"-close"},t.closeIcon||v.a.createElement("span",{className:n+"-close-x"})):null)}}]),t}(h.Component);w.propTypes={duration:T.a.number,onClose:T.a.func,children:T.a.any,update:T.a.bool,closeIcon:T.a.node},w.defaultProps={onEnd:function(){},onClose:function(){},duration:1.5,style:{right:"50%"}};var I=w,O=0,j=Date.now();var K=function(e){function t(){var e,n,o,a;u()(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=o=d()(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={notices:[]},o.add=function(e){var t=e.key=e.key||"rcNotification_"+j+"_"+O++,n=o.props.maxCount;o.setState(function(o){var a=o.notices,r=a.map(function(e){return e.key}).indexOf(t),i=a.concat();return-1!==r?i.splice(r,1,e):(n&&a.length>=n&&(e.updateKey=i[0].updateKey||i[0].key,i.shift()),i.push(e)),{notices:i}})},o.remove=function(e){o.setState(function(t){return{notices:t.notices.filter(function(t){return t.key!==e})}})},a=n,d()(o,a)}return C()(t,e),m()(t,[{key:"getTransitionName",value:function(){var e=this.props,t=e.transitionName;return!t&&e.animation&&(t=e.prefixCls+"-"+e.animation),t}},{key:"render",value:function(){var e,t=this,n=this.props,o=this.state.notices,a=o.map(function(e,a){var r=Boolean(a===o.length-1&&e.updateKey),i=e.updateKey?e.updateKey:e.key,s=Object(x.a)(t.remove.bind(t,e.key),e.onClose);return v.a.createElement(I,c()({prefixCls:n.prefixCls},e,{key:i,update:r,onClose:s,onClick:e.onClick,closeIcon:n.closeIcon}),e.content)}),r=(e={},i()(e,n.prefixCls,1),i()(e,n.className,!!n.className),e);return v.a.createElement("div",{className:_()(r),style:n.style},v.a.createElement(g.default,{transitionName:this.getTransitionName()},a))}}]),t}(h.Component);K.propTypes={prefixCls:T.a.string,transitionName:T.a.string,animation:T.a.oneOfType([T.a.string,T.a.object]),style:T.a.object,maxCount:T.a.number,closeIcon:T.a.node},K.defaultProps={prefixCls:"rc-notification",animation:"fade",style:{top:65,left:"50%"}},K.newInstance=function(e,t){var n=e||{},o=n.getContainer,r=a()(n,["getContainer"]),i=document.createElement("div");o?o().appendChild(i):document.body.appendChild(i);var s=!1;b.a.render(v.a.createElement(K,c()({},r,{ref:function(e){s||(s=!0,t({notice:function(t){e.add(t)},removeNotice:function(t){e.remove(t)},component:e,destroy:function(){b.a.unmountComponentAtNode(i),i.parentNode.removeChild(i)}}))}})),i)};var P=K;t.default=P}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmMtbm90aWZpY2F0aW9uL2VzL05vdGljZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmMtbm90aWZpY2F0aW9uL2VzL05vdGlmaWNhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmMtbm90aWZpY2F0aW9uL2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIk5vdGljZV9Ob3RpY2UiLCJfQ29tcG9uZW50IiwiTm90aWNlIiwiX3JlZiIsIl90ZW1wIiwiX3RoaXMiLCJfcmV0IiwiY2xhc3NDYWxsQ2hlY2tfZGVmYXVsdCIsInRoaXMiLCJfbGVuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXJncyIsIkFycmF5IiwiX2tleSIsInBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm5fZGVmYXVsdCIsIl9fcHJvdG9fXyIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwiY2FsbCIsImFwcGx5IiwiY29uY2F0IiwiY2xvc2UiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiY2xlYXJDbG9zZVRpbWVyIiwicHJvcHMiLCJvbkNsb3NlIiwic3RhcnRDbG9zZVRpbWVyIiwiZHVyYXRpb24iLCJjbG9zZVRpbWVyIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsImluaGVyaXRzX2RlZmF1bHQiLCJjcmVhdGVDbGFzc19kZWZhdWx0Iiwia2V5IiwidmFsdWUiLCJwcmV2UHJvcHMiLCJ1cGRhdGUiLCJyZXN0YXJ0Q2xvc2VUaW1lciIsIl9jbGFzc05hbWUiLCJjb21wb25lbnRDbGFzcyIsInByZWZpeENscyIsImNsYXNzTmFtZSIsImRlZmluZVByb3BlcnR5X2RlZmF1bHQiLCJjbG9zYWJsZSIsInJlYWN0X2RlZmF1bHQiLCJhIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzbmFtZXNfZGVmYXVsdCIsInN0eWxlIiwib25Nb3VzZUVudGVyIiwib25Nb3VzZUxlYXZlIiwib25DbGljayIsImNoaWxkcmVuIiwidGFiSW5kZXgiLCJjbG9zZUljb24iLCJyZWFjdCIsInByb3BUeXBlcyIsInByb3BfdHlwZXNfZGVmYXVsdCIsIm51bWJlciIsImZ1bmMiLCJhbnkiLCJib29sIiwibm9kZSIsImRlZmF1bHRQcm9wcyIsIm9uRW5kIiwicmlnaHQiLCJlc19Ob3RpY2UiLCJzZWVkIiwibm93IiwiRGF0ZSIsIk5vdGlmaWNhdGlvbl9Ob3RpZmljYXRpb24iLCJOb3RpZmljYXRpb24iLCJzdGF0ZSIsIm5vdGljZXMiLCJhZGQiLCJub3RpY2UiLCJtYXhDb3VudCIsInNldFN0YXRlIiwicHJldmlvdXNTdGF0ZSIsIm5vdGljZUluZGV4IiwibWFwIiwidiIsImluZGV4T2YiLCJ1cGRhdGVkTm90aWNlcyIsInNwbGljZSIsInVwZGF0ZUtleSIsInNoaWZ0IiwicHVzaCIsInJlbW92ZSIsImZpbHRlciIsInRyYW5zaXRpb25OYW1lIiwiYW5pbWF0aW9uIiwiX3RoaXMyIiwibm90aWNlTm9kZXMiLCJpbmRleCIsIkJvb2xlYW4iLCJjcmVhdGVDaGFpbmVkRnVuY3Rpb24iLCJiaW5kIiwiZXh0ZW5kc19kZWZhdWx0IiwiY29udGVudCIsIkFuaW1hdGUiLCJnZXRUcmFuc2l0aW9uTmFtZSIsInN0cmluZyIsIm9uZU9mVHlwZSIsIm9iamVjdCIsInRvcCIsImxlZnQiLCJuZXdJbnN0YW5jZSIsInByb3BlcnRpZXMiLCJjYWxsYmFjayIsIl9yZWYyIiwiZ2V0Q29udGFpbmVyIiwib2JqZWN0V2l0aG91dFByb3BlcnRpZXNfZGVmYXVsdCIsImRpdiIsImRvY3VtZW50IiwiYXBwZW5kQ2hpbGQiLCJib2R5IiwiY2FsbGVkIiwicmVhY3RfZG9tX2RlZmF1bHQiLCJyZW5kZXIiLCJyZWYiLCJub3RpZmljYXRpb24iLCJub3RpY2VQcm9wcyIsInJlbW92ZU5vdGljZSIsImNvbXBvbmVudCIsImRlc3Ryb3kiLCJ1bm1vdW50Q29tcG9uZW50QXROb2RlIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiZXNfTm90aWZpY2F0aW9uIiwiX193ZWJw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QUFTeUQsT0FDdEJaLGVBQWtCakMsRUFBQVosRUFBU3lELE9BQzNCWCxVQUFhbEMsRUFBQVosRUFBUzBELFVBQUEsQ0FBWTlDLEVBQUFaLEVBQVN5RCxPQUFTN0MsRUFBQVosRUFBUzJELFNBQzdEeEQsTUFBU1MsRUFBQVosRUFBUzJELE9BQ2xCNUIsU0FBWW5CLEVBQUFaLEVBQVNhLE9BQ3JCSixVQUFhRyxFQUFBWixFQUFTaUIsTUFFdEJRLEVBQVlQLGFBQUEsQ0FDWnZCLFVBQUEsa0JBQ0FtRCxVQUFBLE9BQ0EzQyxNQUFBLENBQ0F5RCxJQUFBLEdBQ0FDLEtBQUEsUUFLQXBDLEVBQVlxQyxZQUFBLFNBQUFDLEVBQUFDLEdBQ1osSUFBQUMsRUFBQUYsR0FBQSxHQUNBRyxFQUFBRCxFQUFBQyxhQUNBdkYsRUFBY3dGLElBQXdCRixFQUFBLGtCQUV0Q0csRUFBQUMsU0FBQXBFLGNBQUEsT0FDQWlFLEVBQ0FBLElBQ0FJLFlBQUFGLEdBRUFDLFNBQUFFLEtBQUFELFlBQUFGLEdBRUEsSUFBQUksR0FBQSxFQXFCRUMsRUFBQXpFLEVBQVEwRSxPQUFRM0UsRUFBQUMsRUFBS0MsY0FBZXdCLEVBQWM0QixJQUFRLEdBQUcxRSxFQUFBLENBQVVnRyxJQXBCekUsU0FBQUMsR0FDQUosSUFHQUEsR0FBQSxFQUNBUixFQUFBLENBQ0FsQyxPQUFBLFNBQUErQyxHQUNBRCxFQUFBL0MsSUFBQWdELElBRUFDLGFBQUEsU0FBQTFGLEdBQ0F3RixFQUFBakMsT0FBQXZELElBR0EyRixVQUFBSCxFQUNBSSxRQUFBLFdBQ1FQLEVBQUF6RSxFQUFRaUYsdUJBQUFiLEdBQ2hCQSxFQUFBYyxXQUFBQyxZQUFBZixXQUlvRkEsSUFHckUsSUFBQWdCLEVBQUEsRUNsTEFDLEVBQUEiLCJmaWxlIjoibnBtLnJjLW5vdGlmaWNhdGlvbi5jaHVua2hhc2guanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSc7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayc7XG5pbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyc7XG5pbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nO1xuaW1wb3J0IF9pbmhlcml0cyBmcm9tICdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnO1xuaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcblxudmFyIE5vdGljZSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhOb3RpY2UsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIE5vdGljZSgpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTm90aWNlKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9yZWYgPSBOb3RpY2UuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihOb3RpY2UpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5jbG9zZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuICAgICAgX3RoaXMuY2xlYXJDbG9zZVRpbWVyKCk7XG4gICAgICBfdGhpcy5wcm9wcy5vbkNsb3NlKCk7XG4gICAgfSwgX3RoaXMuc3RhcnRDbG9zZVRpbWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF90aGlzLnByb3BzLmR1cmF0aW9uKSB7XG4gICAgICAgIF90aGlzLmNsb3NlVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpcy5jbG9zZSgpO1xuICAgICAgICB9LCBfdGhpcy5wcm9wcy5kdXJhdGlvbiAqIDEwMDApO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmNsZWFyQ2xvc2VUaW1lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfdGhpcy5jbG9zZVRpbWVyKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChfdGhpcy5jbG9zZVRpbWVyKTtcbiAgICAgICAgX3RoaXMuY2xvc2VUaW1lciA9IG51bGw7XG4gICAgICB9XG4gICAgfSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTm90aWNlLCBbe1xuICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB0aGlzLnN0YXJ0Q2xvc2VUaW1lcigpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudERpZFVwZGF0ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmR1cmF0aW9uICE9PSBwcmV2UHJvcHMuZHVyYXRpb24gfHwgdGhpcy5wcm9wcy51cGRhdGUpIHtcbiAgICAgICAgdGhpcy5yZXN0YXJ0Q2xvc2VUaW1lcigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxVbm1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0aGlzLmNsZWFyQ2xvc2VUaW1lcigpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3Jlc3RhcnRDbG9zZVRpbWVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdGFydENsb3NlVGltZXIoKSB7XG4gICAgICB0aGlzLmNsZWFyQ2xvc2VUaW1lcigpO1xuICAgICAgdGhpcy5zdGFydENsb3NlVGltZXIoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX2NsYXNzTmFtZTtcblxuICAgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcbiAgICAgIHZhciBjb21wb25lbnRDbGFzcyA9IHByb3BzLnByZWZpeENscyArICctbm90aWNlJztcbiAgICAgIHZhciBjbGFzc05hbWUgPSAoX2NsYXNzTmFtZSA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZSwgJycgKyBjb21wb25lbnRDbGFzcywgMSksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lLCBjb21wb25lbnRDbGFzcyArICctY2xvc2FibGUnLCBwcm9wcy5jbG9zYWJsZSksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lLCBwcm9wcy5jbGFzc05hbWUsICEhcHJvcHMuY2xhc3NOYW1lKSwgX2NsYXNzTmFtZSk7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoY2xhc3NOYW1lKSxcbiAgICAgICAgICBzdHlsZTogcHJvcHMuc3R5bGUsXG4gICAgICAgICAgb25Nb3VzZUVudGVyOiB0aGlzLmNsZWFyQ2xvc2VUaW1lcixcbiAgICAgICAgICBvbk1vdXNlTGVhdmU6IHRoaXMuc3RhcnRDbG9zZVRpbWVyLFxuICAgICAgICAgIG9uQ2xpY2s6IHByb3BzLm9uQ2xpY2tcbiAgICAgICAgfSxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogY29tcG9uZW50Q2xhc3MgKyAnLWNvbnRlbnQnIH0sXG4gICAgICAgICAgcHJvcHMuY2hpbGRyZW5cbiAgICAgICAgKSxcbiAgICAgICAgcHJvcHMuY2xvc2FibGUgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdhJyxcbiAgICAgICAgICB7IHRhYkluZGV4OiAnMCcsIG9uQ2xpY2s6IHRoaXMuY2xvc2UsIGNsYXNzTmFtZTogY29tcG9uZW50Q2xhc3MgKyAnLWNsb3NlJyB9LFxuICAgICAgICAgIHByb3BzLmNsb3NlSWNvbiB8fCBSZWFjdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6IGNvbXBvbmVudENsYXNzICsgJy1jbG9zZS14JyB9KVxuICAgICAgICApIDogbnVsbFxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTm90aWNlO1xufShDb21wb25lbnQpO1xuXG5Ob3RpY2UucHJvcFR5cGVzID0ge1xuICBkdXJhdGlvbjogUHJvcFR5cGVzLm51bWJlcixcbiAgb25DbG9zZTogUHJvcFR5cGVzLmZ1bmMsXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMuYW55LFxuICB1cGRhdGU6IFByb3BUeXBlcy5ib29sLFxuICBjbG9zZUljb246IFByb3BUeXBlcy5ub2RlXG59O1xuTm90aWNlLmRlZmF1bHRQcm9wcyA9IHtcbiAgb25FbmQ6IGZ1bmN0aW9uIG9uRW5kKCkge30sXG4gIG9uQ2xvc2U6IGZ1bmN0aW9uIG9uQ2xvc2UoKSB7fSxcblxuICBkdXJhdGlvbjogMS41LFxuICBzdHlsZToge1xuICAgIHJpZ2h0OiAnNTAlJ1xuICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgTm90aWNlOyIsImltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSAnYmFiZWwtcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzJztcbmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAnYmFiZWwtcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5JztcbmltcG9ydCBfZXh0ZW5kcyBmcm9tICdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcyc7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayc7XG5pbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyc7XG5pbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nO1xuaW1wb3J0IF9pbmhlcml0cyBmcm9tICdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnO1xuaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBBbmltYXRlIGZyb20gJ3JjLWFuaW1hdGUnO1xuaW1wb3J0IGNyZWF0ZUNoYWluZWRGdW5jdGlvbiBmcm9tICdyYy11dGlsL2VzL2NyZWF0ZUNoYWluZWRGdW5jdGlvbic7XG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBOb3RpY2UgZnJvbSAnLi9Ob3RpY2UnO1xuXG52YXIgc2VlZCA9IDA7XG52YXIgbm93ID0gRGF0ZS5ub3coKTtcblxuZnVuY3Rpb24gZ2V0VXVpZCgpIHtcbiAgcmV0dXJuICdyY05vdGlmaWNhdGlvbl8nICsgbm93ICsgJ18nICsgc2VlZCsrO1xufVxuXG52YXIgTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKE5vdGlmaWNhdGlvbiwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gTm90aWZpY2F0aW9uKCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOb3RpZmljYXRpb24pO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX3JlZiA9IE5vdGlmaWNhdGlvbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE5vdGlmaWNhdGlvbikpLmNhbGwuYXBwbHkoX3JlZiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLnN0YXRlID0ge1xuICAgICAgbm90aWNlczogW11cbiAgICB9LCBfdGhpcy5hZGQgPSBmdW5jdGlvbiAobm90aWNlKSB7XG4gICAgICB2YXIga2V5ID0gbm90aWNlLmtleSA9IG5vdGljZS5rZXkgfHwgZ2V0VXVpZCgpO1xuICAgICAgdmFyIG1heENvdW50ID0gX3RoaXMucHJvcHMubWF4Q291bnQ7XG5cbiAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChwcmV2aW91c1N0YXRlKSB7XG4gICAgICAgIHZhciBub3RpY2VzID0gcHJldmlvdXNTdGF0ZS5ub3RpY2VzO1xuICAgICAgICB2YXIgbm90aWNlSW5kZXggPSBub3RpY2VzLm1hcChmdW5jdGlvbiAodikge1xuICAgICAgICAgIHJldHVybiB2LmtleTtcbiAgICAgICAgfSkuaW5kZXhPZihrZXkpO1xuICAgICAgICB2YXIgdXBkYXRlZE5vdGljZXMgPSBub3RpY2VzLmNvbmNhdCgpO1xuICAgICAgICBpZiAobm90aWNlSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgdXBkYXRlZE5vdGljZXMuc3BsaWNlKG5vdGljZUluZGV4LCAxLCBub3RpY2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChtYXhDb3VudCAmJiBub3RpY2VzLmxlbmd0aCA+PSBtYXhDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWNlLnVwZGF0ZUtleSA9IHVwZGF0ZWROb3RpY2VzWzBdLnVwZGF0ZUtleSB8fCB1cGRhdGVkTm90aWNlc1swXS5rZXk7XG4gICAgICAgICAgICB1cGRhdGVkTm90aWNlcy5zaGlmdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB1cGRhdGVkTm90aWNlcy5wdXNoKG5vdGljZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBub3RpY2VzOiB1cGRhdGVkTm90aWNlc1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSwgX3RoaXMucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZpb3VzU3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBub3RpY2VzOiBwcmV2aW91c1N0YXRlLm5vdGljZXMuZmlsdGVyKGZ1bmN0aW9uIChub3RpY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBub3RpY2Uua2V5ICE9PSBrZXk7XG4gICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0sIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE5vdGlmaWNhdGlvbiwgW3tcbiAgICBrZXk6ICdnZXRUcmFuc2l0aW9uTmFtZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRyYW5zaXRpb25OYW1lKCkge1xuICAgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcbiAgICAgIHZhciB0cmFuc2l0aW9uTmFtZSA9IHByb3BzLnRyYW5zaXRpb25OYW1lO1xuICAgICAgaWYgKCF0cmFuc2l0aW9uTmFtZSAmJiBwcm9wcy5hbmltYXRpb24pIHtcbiAgICAgICAgdHJhbnNpdGlvbk5hbWUgPSBwcm9wcy5wcmVmaXhDbHMgKyAnLScgKyBwcm9wcy5hbmltYXRpb247XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJhbnNpdGlvbk5hbWU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXMsXG4gICAgICAgICAgX2NsYXNzTmFtZTtcblxuICAgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcbiAgICAgIHZhciBub3RpY2VzID0gdGhpcy5zdGF0ZS5ub3RpY2VzO1xuXG4gICAgICB2YXIgbm90aWNlTm9kZXMgPSBub3RpY2VzLm1hcChmdW5jdGlvbiAobm90aWNlLCBpbmRleCkge1xuICAgICAgICB2YXIgdXBkYXRlID0gQm9vbGVhbihpbmRleCA9PT0gbm90aWNlcy5sZW5ndGggLSAxICYmIG5vdGljZS51cGRhdGVLZXkpO1xuICAgICAgICB2YXIga2V5ID0gbm90aWNlLnVwZGF0ZUtleSA/IG5vdGljZS51cGRhdGVLZXkgOiBub3RpY2Uua2V5O1xuICAgICAgICB2YXIgb25DbG9zZSA9IGNyZWF0ZUNoYWluZWRGdW5jdGlvbihfdGhpczIucmVtb3ZlLmJpbmQoX3RoaXMyLCBub3RpY2Uua2V5KSwgbm90aWNlLm9uQ2xvc2UpO1xuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBOb3RpY2UsXG4gICAgICAgICAgX2V4dGVuZHMoe1xuICAgICAgICAgICAgcHJlZml4Q2xzOiBwcm9wcy5wcmVmaXhDbHNcbiAgICAgICAgICB9LCBub3RpY2UsIHtcbiAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgdXBkYXRlOiB1cGRhdGUsXG4gICAgICAgICAgICBvbkNsb3NlOiBvbkNsb3NlLFxuICAgICAgICAgICAgb25DbGljazogbm90aWNlLm9uQ2xpY2ssXG4gICAgICAgICAgICBjbG9zZUljb246IHByb3BzLmNsb3NlSWNvblxuICAgICAgICAgIH0pLFxuICAgICAgICAgIG5vdGljZS5jb250ZW50XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIHZhciBjbGFzc05hbWUgPSAoX2NsYXNzTmFtZSA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZSwgcHJvcHMucHJlZml4Q2xzLCAxKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWUsIHByb3BzLmNsYXNzTmFtZSwgISFwcm9wcy5jbGFzc05hbWUpLCBfY2xhc3NOYW1lKTtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBjbGFzc05hbWU6IGNsYXNzbmFtZXMoY2xhc3NOYW1lKSwgc3R5bGU6IHByb3BzLnN0eWxlIH0sXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgQW5pbWF0ZSxcbiAgICAgICAgICB7IHRyYW5zaXRpb25OYW1lOiB0aGlzLmdldFRyYW5zaXRpb25OYW1lKCkgfSxcbiAgICAgICAgICBub3RpY2VOb2Rlc1xuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBOb3RpZmljYXRpb247XG59KENvbXBvbmVudCk7XG5cbk5vdGlmaWNhdGlvbi5wcm9wVHlwZXMgPSB7XG4gIHByZWZpeENsczogUHJvcFR5cGVzLnN0cmluZyxcbiAgdHJhbnNpdGlvbk5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGFuaW1hdGlvbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm9iamVjdF0pLFxuICBzdHlsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgbWF4Q291bnQ6IFByb3BUeXBlcy5udW1iZXIsXG4gIGNsb3NlSWNvbjogUHJvcFR5cGVzLm5vZGVcbn07XG5Ob3RpZmljYXRpb24uZGVmYXVsdFByb3BzID0ge1xuICBwcmVmaXhDbHM6ICdyYy1ub3RpZmljYXRpb24nLFxuICBhbmltYXRpb246ICdmYWRlJyxcbiAgc3R5bGU6IHtcbiAgICB0b3A6IDY1LFxuICAgIGxlZnQ6ICc1MCUnXG4gIH1cbn07XG5cblxuTm90aWZpY2F0aW9uLm5ld0luc3RhbmNlID0gZnVuY3Rpb24gbmV3Tm90aWZpY2F0aW9uSW5zdGFuY2UocHJvcGVydGllcywgY2FsbGJhY2spIHtcbiAgdmFyIF9yZWYyID0gcHJvcGVydGllcyB8fCB7fSxcbiAgICAgIGdldENvbnRhaW5lciA9IF9yZWYyLmdldENvbnRhaW5lcixcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYyLCBbJ2dldENvbnRhaW5lciddKTtcblxuICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGlmIChnZXRDb250YWluZXIpIHtcbiAgICB2YXIgcm9vdCA9IGdldENvbnRhaW5lcigpO1xuICAgIHJvb3QuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgfSBlbHNlIHtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7XG4gIH1cbiAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICBmdW5jdGlvbiByZWYobm90aWZpY2F0aW9uKSB7XG4gICAgaWYgKGNhbGxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjYWxsZWQgPSB0cnVlO1xuICAgIGNhbGxiYWNrKHtcbiAgICAgIG5vdGljZTogZnVuY3Rpb24gbm90aWNlKG5vdGljZVByb3BzKSB7XG4gICAgICAgIG5vdGlmaWNhdGlvbi5hZGQobm90aWNlUHJvcHMpO1xuICAgICAgfSxcbiAgICAgIHJlbW92ZU5vdGljZTogZnVuY3Rpb24gcmVtb3ZlTm90aWNlKGtleSkge1xuICAgICAgICBub3RpZmljYXRpb24ucmVtb3ZlKGtleSk7XG4gICAgICB9LFxuXG4gICAgICBjb21wb25lbnQ6IG5vdGlmaWNhdGlvbixcbiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIFJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUoZGl2KTtcbiAgICAgICAgZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGl2KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBSZWFjdERPTS5yZW5kZXIoUmVhY3QuY3JlYXRlRWxlbWVudChOb3RpZmljYXRpb24sIF9leHRlbmRzKHt9LCBwcm9wcywgeyByZWY6IHJlZiB9KSksIGRpdik7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBOb3RpZmljYXRpb247IiwiaW1wb3J0IE5vdGlmaWNhdGlvbiBmcm9tICcuL05vdGlmaWNhdGlvbic7XG5leHBvcnQgZGVmYXVsdCBOb3RpZmljYXRpb247Il0sInNvdXJjZVJvb3QiOiIifQ==